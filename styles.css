* { box-sizing: border-box; margin: 0; padding: 0; }

body {
  font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", system-ui, sans-serif;
  background: #000;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
}

.phone {
  width: 390px;
  height: 844px;
  border-radius: 40px;
  background: #000;
  box-shadow: 0 16px 40px rgba(0, 0, 0, 0.8);
  overflow: hidden;
  position: relative;
  padding-top: 52px;
  color: #f5f5f5;
}

.status-bar {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  padding: 8px 16px;
  color: #fff;
  font-size: 14px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  height: 44px;
  background: #000;
}

.status-left {
  display: none;
}

.status-time {
  font-weight: 600;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  flex: 1;
}

.status-right {
  display: flex;
  gap: 4px;
  align-items: center;
}

.status-icon {
  width: 16px;
  height: 16px;
}

.header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 20px;
  margin-bottom: 4px;
  color: #f5f5f5;
}
.header-left { font-size: 17px; color: #ff9f0a; cursor: default; }
.header-title { font-size: 22px; font-weight: 600; display: none; }

.header-subtitle {
  font-size: 9px;
  color: #8e8e93;
  font-weight: 500;
  margin-top: 2px;
  letter-spacing: 0.3px;
  text-transform: uppercase;
}
.header-plus { font-size: 30px; color: #ff9f0a; line-height: 1; cursor: default; }

.instruction {
  font-size: 13px;
  opacity: 0.8;
  padding: 0 20px 6px 20px;
}

.alarms-scroll {
  position: absolute;
  top: 152px;
  bottom: 120px;
  left: 0;
  right: 0;
  overflow-y: auto;
  padding-bottom: 40px;
  z-index: 5;
}

.trial-banner {
  position: absolute;
  top: 64px;
  left: 0;
  right: 0;
  padding: 12px 20px;
  background: #0c0c0c;
  border-top: 0.5px solid #1f1f1f;
  border-bottom: 0.5px solid #1f1f1f;
  z-index: 6;
  display: flex;
  justify-content: space-between;
  gap: 12px;
  font-size: 13px;
  color: #d8d8d8;
}

.trial-footer {
  position: absolute;
  left: 16px;
  right: 16px;
  bottom: 24px;
  z-index: 7;
}

.pill-btn {
  width: 100%;
  padding: 14px 18px;
  border: none;
  border-radius: 14px;
  background: #ff9f0a;
  color: #000;
  font-weight: 700;
  font-size: 16px;
  cursor: pointer;
  box-shadow: 0 10px 20px rgba(0,0,0,0.35);
}

.footer-note {
  margin-top: 8px;
  text-align: center;
  color: #9f9f9f;
  font-size: 12px;
  min-height: 18px;
}

.target-row {
  background: #0f0f0f;
  border-left: 3px solid #ffcc00;
}

.alarm-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px 16px 40px;
  border-top: 0.5px solid #222;
  position: relative;
  scroll-margin-top: 88px;
  background: #000;
}
.alarm-row:last-child { border-bottom: 0.5px solid #222; }

.alarm-time {
  font-size: 32px;
  font-weight: 300;
  color: #f5f5f5;
  letter-spacing: 1px;
}
.alarm-am {
  font-size: 16px;
  margin-left: 4px;
  color: #f5f5f5;
}
.alarm-label {
  font-size: 13px;
  color: #9f9f9f;
  margin-top: 2px;
}
.alarm-left { display: flex; flex-direction: column; }

/* iOS-style toggle switch */
.alarm-toggle {
  width: 51px;
  height: 31px;
  border-radius: 16px;
  position: relative;
  cursor: pointer;
  transition: background-color 0.3s ease;
  flex-shrink: 0;
  display: block;
}

.alarm-toggle.on {
  background-color: #34c759;
}

.alarm-toggle.off {
  background-color: #39393d;
}

.alarm-toggle::after {
  content: '';
  display: block;
  position: absolute;
  width: 27px;
  height: 27px;
  border-radius: 50%;
  background-color: #fff;
  top: 2px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  transition: left 0.3s ease;
}

.alarm-toggle.on::after {
  left: 22px;
}

.alarm-toggle.off::after {
  left: 2px;
}

/* DIAL drawer */
/* FIXED: Changed from fixed to absolute for proper trial flow, adjusted top for phone layout */
.dial-container {
  position: absolute;
  left: -130px;       /* peek out ~190px (59% of 320px) on the left */
  top: 220px;         /* position relative to phone content (after header + banner) */
  width: 330px;       /* Extended slightly to show pointer */
  height: 320px;
  overflow: visible;  /* Allow pointer to show */
  z-index: 10;
  transition: left 0.25s ease-out;
  cursor: pointer;
  pointer-events: auto;
  touch-action: none;
}

/* when drawer is fully open, we add a class via JS */
.dial-container.open {
  left: 0;            /* fully visible quarter circle */
}

.dial {
  position: absolute;
  left: -160px;       /* center circle at left edge */
  top: 0;
  width: 320px;
  height: 320px;
  border-radius: 50%;
  background: linear-gradient(135deg, rgba(28, 28, 30, 0.7), rgba(44, 44, 46, 0.7));
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  box-shadow: 0 4px 24px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255,255,255,0.05);
  border: 1px solid rgba(255, 255, 255, 0.08);
  transform-origin: 50% 50%;
  transform: rotate(0deg);
  pointer-events: none;
  backdrop-filter: blur(10px);
}

/* AM/PM semicircle divider - subtle shaded PM half */
.dial::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: conic-gradient(from 90deg, rgba(255, 255, 255, 0.04) 0deg, rgba(255, 255, 255, 0.04) 90deg, rgba(0, 0, 0, 0.2) 90deg, rgba(0, 0, 0, 0.2) 270deg, rgba(255, 255, 255, 0.04) 270deg, rgba(255, 255, 255, 0.04) 360deg);
  pointer-events: none;
  border-radius: 50%;
}

/* AM label - in the middle of AM half (right side) */
.dial-am-label {
  position: absolute;
  top: 50%;
  right: 70px;
  transform: translateY(-50%);
  color: rgba(255, 255, 255, 0.5);
  font-size: 14px;
  font-weight: 600;
  z-index: 2;
  display: flex;
  align-items: center;
  gap: 5px;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.label-icon {
  width: 16px;
  height: 16px;
  stroke: rgba(255, 255, 255, 0.5);
  opacity: 0.8;
}

/* PM label - in the middle of PM half (left side) */
.dial-pm-label {
  position: absolute;
  top: 50%;
  left: 70px;
  transform: translateY(-50%) rotateZ(180deg);
  color: rgba(255, 255, 255, 0.5);
  font-size: 14px;
  font-weight: 600;
  z-index: 2;
  display: flex;
  align-items: center;
  gap: 5px;
  text-transform: uppercase;
  letter-spacing: 1px;
}

/* hour tick marks */
.dial-tick {
  position: absolute;
  width: 1.5px;
  height: 10px;
  background: rgba(255, 255, 255, 0.3);
  left: calc(50% - 0.75px);
  top: 10px;
  transform-origin: center 150px;
  opacity: 0;
  transition: opacity 0.3s ease-out 0.1s;
  border-radius: 2px;
}

.dial-container.open .dial-tick {
  opacity: 1;
}

/* hour numbers - clean typography */
.dial-number {
  position: absolute;
  color: rgba(255, 255, 255, 0.85);
  font-size: 15px;
  font-weight: 500;
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  left: 148px;
  top: 18px;
  transform-origin: 12px 142px;
  z-index: 2;
  opacity: 0;
  transition: opacity 0.3s ease-out 0.1s;
  font-variant-numeric: tabular-nums;
  letter-spacing: 0;
}

.dial-container.open .dial-number {
  opacity: 1;
}

/* Triangular pointer snug to dial edge, pointing into the dial (leftward tip) */
.dial-pointer {
  position: absolute;
  width: 0;
  height: 0;
  border-top: 12px solid transparent;
  border-bottom: 12px solid transparent;
  border-right: 16px solid #ff9f0a; /* point left into dial */
  left: 144px; /* Position at right edge of visible dial quarter */
  top: 50%;
  transform: translateY(-50%);
  z-index: 15;
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.25s ease-out;
  filter: drop-shadow(0 2px 6px rgba(0, 0, 0, 0.4));
}

.dial-pointer::before,
.dial-pointer::after {
  display: none;
}

/* FIXED: Ensure all dial elements show when open */
.dial-container.open .dial-pointer {
  opacity: 1;
}

.dial-container.open .dial-tick {
  opacity: 0.8;
}

.dial-container.open .dial-number {
  opacity: 1;
}

/* drag handle over list */
.drag-handle {
  display: none;
}

.hidden { display: none !important; }

.trial-modal {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.85);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: 20px;
  padding-top: 0;
}

.trial-modal-content {
  width: 100%;
  max-width: 320px;
  background: #1c1c1e;
  border-radius: 16px;
  padding: 20px;
  box-shadow: 0 12px 24px rgba(0,0,0,0.55);
}

.trial-modal-content h2 {
  margin-bottom: 8px;
  font-size: 20px;
  color: #fff;
}

.trial-modal-content p {
  margin-bottom: 16px;
  color: #d1d1d1;
  line-height: 1.4;
  font-size: 14px;
}

.modal-steps {
  margin: 0 0 16px 18px;
  color: #cfcfcf;
  font-size: 13px;
  line-height: 1.5;
}

.modal-steps li { margin-bottom: 6px; }

#effort-slider {
  width: 100%;
  margin: 10px 0 6px 0;
}

.slider-labels {
  display: flex;
  justify-content: space-between;
  color: #8e8e93;
  font-size: 12px;
  margin-bottom: 12px;
}

/* Trial info bar (target + timer) */
.trial-info-bar {
  position: absolute;
  top: 100px;
  left: 16px;
  right: 16px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  z-index: 100;
  gap: 12px;
}

.target-reminder {
  background: rgba(28, 28, 30, 0.95);
  padding: 6px 10px;
  border-radius: 8px;
  backdrop-filter: blur(10px);
  display: flex;
  flex-direction: column;
  justify-content: center;
}

.target-label {
  font-size: 9px;
  font-weight: 600;
  color: rgba(142, 142, 147, 0.7);
  letter-spacing: 0.5px;
  text-transform: uppercase;
  margin-bottom: 2px;
  line-height: 1;
}

.target-time {
  font-size: 15px;
  font-weight: 600;
  color: #fff;
  line-height: 1.2;
}

.timer-display {
  background: #2c2c2e;
  padding: 10px 14px;
  border-radius: 8px;
  font-size: 15px;
  font-weight: 600;
  color: #fff;
  min-width: 54px;
  text-align: center;
  line-height: 1;
  font-variant-numeric: tabular-nums;
}

.timer-display.warning {
  background: #ff9f0a;
  color: #000;
}

.timer-display.timeout {
  background: #ff3b30;
  color: #fff;
  animation: pulse 0.5s infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.6; }
}

/* Break overlay */
.break-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.95);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1000;
  font-size: 24px;
  font-weight: 600;
  color: #fff;
  flex-direction: column;
  gap: 20px;
}

.break-overlay.hidden {
  display: none;
}

.break-countdown {
  font-size: 48px;
  color: #007aff;
  font-weight: 700;
}
